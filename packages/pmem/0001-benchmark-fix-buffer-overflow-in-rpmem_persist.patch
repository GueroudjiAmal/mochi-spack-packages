From 7e180535a3c3e3c38270474168aba4492feaa14a Mon Sep 17 00:00:00 2001
From: Krzysztof Czurylo <krzysztof.czurylo@intel.com>
Date: Tue, 18 Jul 2017 13:14:50 +0200
Subject: [PATCH] benchmark: fix buffer overflow in rpmem_persist

Ref: pmem/issues#600
---
 src/benchmarks/rpmem_persist.cpp | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

diff --git a/src/benchmarks/rpmem_persist.cpp b/src/benchmarks/rpmem_persist.cpp
index 8f10a5c4..a7872ae5 100644
--- a/src/benchmarks/rpmem_persist.cpp
+++ b/src/benchmarks/rpmem_persist.cpp
@@ -284,11 +284,7 @@ rpmem_poolset_init(const char *path, struct rpmem_bench *mb,
 
 	struct rpmem_pool_attr attr;
 	memset(&attr, 0, sizeof(attr));
-	int ret = snprintf(attr.signature, sizeof(attr.signature), "PMEMBENCH");
-	if (ret < 0) {
-		perror("snprintf");
-		return -1;
-	}
+	memcpy(attr.signature, "PMEMBNCH", sizeof(attr.signature));
 
 	/* read and validate poolset */
 	if (util_poolset_read(&set, path)) {
-- 
2.14.1

